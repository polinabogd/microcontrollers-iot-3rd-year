/* ========================================
 *
 * Copyright YOUR COMPANY, THE YEAR
 * All Rights Reserved
 * UNPUBLISHED, LICENSED SOFTWARE.
 *
 * CONFIDENTIAL AND PROPRIETARY INFORMATION
 * WHICH IS THE PROPERTY OF your company.
 *
 * ========================================
*/
#include "project.h"

#define RED 0b100
#define YELLOW 0b010
#define GREEN 0b001
#define RED_YELLOW 0b110
#define NO_COLOR 0b000
int state = 0;
inline void Algo1();
inline void Algo2();

CY_ISR(button_int_interrupt){
    
    state+=1;
    
    pin_button_ClearInterrupt();
}

int main(void)
{
    CyGlobalIntEnable; /* Enable global interrupts. */
    
    button_int_StartEx(button_int_interrupt);

    for(;;)
    {
        if(state%2==1){
        Algo1();
    }
    else if(state%2==0){
        Algo2();
    }
    }
}

inline void Algo1(){
    Control_Reg_Write(RED);
    CyDelay(6000);
    Control_Reg_Write(RED_YELLOW);
    CyDelay(2000);
    Control_Reg_Write(GREEN);
    CyDelay(5000);
    Control_Reg_Write(NO_COLOR);
    CyDelay(1000);
    Control_Reg_Write(GREEN);
    CyDelay(1000);
    Control_Reg_Write(NO_COLOR);
    CyDelay(1000);
    Control_Reg_Write(GREEN);
    CyDelay(1000);
    Control_Reg_Write(YELLOW);
    CyDelay(2000);
}
inline void Algo2(){
    Control_Reg_Write(GREEN);
    CyDelay(2000);
    Control_Reg_Write(NO_COLOR);
    CyDelay(1000);
    Control_Reg_Write(GREEN);
    CyDelay(1000);
    Control_Reg_Write(NO_COLOR);
    CyDelay(1000);
    Control_Reg_Write(GREEN);
    CyDelay(1000);
    Control_Reg_Write(YELLOW);
    CyDelay(2000);
    Control_Reg_Write(RED);
    CyDelay(9000);
    Control_Reg_Write(RED_YELLOW);
    CyDelay(2000);
}
